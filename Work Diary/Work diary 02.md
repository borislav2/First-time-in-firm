## Ден 2 9:40
  ------------------------------------
  ## 07/07/22
        
  ### Modbus theory -
   **ФК1 (четене на намотки)**
     Заявка:
   - Адрес на първата намотка
   - Брой намотк   
     Нормален отговор:
   - Брой байтове на намотките
   - Стойности на бобинат   
________________________________________________________________________________________________________________________________________________
   **ФК2 (четене на дискретни входове)**
     Заявка:
   - Адрес на дискретен вход за четене
   - Брой дискретни входове за четен   
     Нормален отговор:      
   - Брой дискретни входни стойности,
    който да следват
   - Стойности на дискретни входов   
________________________________________________________________________________________________________________________________________________
   **ФК3 и ФК4 (четене на входни регистри задръжане)**
     Заявка:
   - Адрес на първия регистър за четене 
   - Брой регистри за четене   
     Нормален отговор:
   - Брой байтове на стойностите на регистъра,
     които да се следват
   - Стойности на регистър   
________________________________________________________________________________________________________________________________________________
   **ФК5 (запис на една намотка)**
     Заявка:
   - Адрес на намотката
   - Стойност за налагане   запи   
     Нормален отговор:същото като заявка   
________________________________________________________________________________________________________________________________________________
   **ФК6 (запис на единичен регистър на задържане)**
     Заявка:
   - Адрес на регистъра на задържане за
     предварително задаване запис
   - Нова стойност на регистъра за съхранени   
     Нормален отговор: същото като заявка   
________________________________________________________________________________________________________________________________________________
   **ФК15 (сила   запис на множество намотки)**
     Заявка:
   - Адрес на първата намотка за форсиране   запис
   - Брой намотки за форсиране   запис
   - Брой байтове на стойностите на бобината, които следва
   - Стойности на намотк   
     Нормален отговор:
   - Адрес на първата намотка
   - брой намотк   
________________________________________________________________________________________________________________________________________________
   **ФК16 (запис на множество регистри за задържане)**
     Заявка:
   - Адрес на първия регистър за съхранение за запис
   - Брой регистри за съхранение за запис
   - Брой байтове на стойностите на регистъра,
      които да се следват
   - Нови стойности на регистрите за съхранени   
     Нормален отговор:
   - Адрес на първия записан регистър на задържане
   - Брой записани регистри на задържан   
     След като разгледах теорията показах
     къде се срещат в примера, който ми 
     беше даден за анализиране
________________________________________________________________________________________________________________________________________________

##      Архитектура на Modbus RTU

![Modbus RTU Architecture](img/Modbus%20RTU%20Architecture.png "Modbus RTU Architecture")

  - дискретен вход
  - 8 релета
  - светлини

|**1**	| 1 	| 0 	| 1 	| 0 	| 1 	| 0 	|
| :-:	  |---	|---	|---	|---	|---	|---	|
|**2**	| 1 	| 1 	| 0 	| 0 	| ↓ 	| 0 	|
|**3**	| 1 	| 0 	| 1 	| 0 	| 0 	| 0 	|
|**4** 	| 1 	| 1 	| 0 	| 0 	| 0 	| 0 	|
|**5**	| 1 	| 0 	| 1 	| 0 	| 0 	| 0 	|
|**6**	| 1 	| 1 	| 0 	| 0 	| 0 	| 0 	|
|**7**	| 1 	| 0 	| 1 	| 0 	| 0 	| ↑ 	|
|**8**	| 1 	| 1 	| 0 	| 0 	| 0 	| 1 	|
        
 - 2 анимационни схеми мисли действия
 
 ### Ползвани материали:

 [https://wikibgbg.top/wiki/Modbus](https://wikibgbg.top/wiki/Modbus)

 примерен код в, който се използва протокола:
 [https://pymodbus.readthedocs.io/en/v1.3.2/examples/synchronous-client.html](https://pymodbus.readthedocs.io/en/v1.3.2/examples/synchronous-client.html)
